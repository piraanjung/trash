{"version":3,"sources":["../../src/pages/buyer-kaya-purchase-list/buyer-kaya-purchase-list.module.ts","../../src/pages/buyer-kaya-purchase-list/buyer-kaya-purchase-list.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BuyerKayaPurchaseListPage } from './buyer-kaya-purchase-list';\nimport { BuyKayaServiceProvider } from '../../providers/buy-kaya-service/buy-kaya-service';\n\n@NgModule({\n  declarations: [\n    BuyerKayaPurchaseListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BuyerKayaPurchaseListPage),\n  ],\n  providers: [BuyKayaServiceProvider]\n})\nexport class BuyerKayaPurchaseListPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/buyer-kaya-purchase-list/buyer-kaya-purchase-list.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, ToastController } from 'ionic-angular';\nimport { BuyKayaServiceProvider } from '../../providers/buy-kaya-service/buy-kaya-service';\n\n@IonicPage({\n  \"name\": \"buyer-kaya-purchase-list\"\n})\n@Component({\n  selector: 'page-buyer-kaya-purchase-list',\n  templateUrl: 'buyer-kaya-purchase-list.html',\n})\nexport class BuyerKayaPurchaseListPage {\n\n  user: any = {}\n  items: any = []\n  address: string = 'เทศบาลตำบลพังโคน สกลนคร'\n  total_purchase_kaya: any\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    private alertCtrl: AlertController,\n    private BuyKayaService: BuyKayaServiceProvider,\n    private toastCtrl: ToastController) { }\n\n  ionViewDidLoad() {\n    this.user = this.navParams.get('user')\n    this.user = (typeof this.user != 'undefined' ? this.user : 0)\n    let items = localStorage.getItem(\"purchase_kaya_list\")\n    this.items = JSON.parse(items)\n\n    let total_purchase_kaya = (localStorage.getItem(\"total_purchase_kaya\") == null ? 0 : localStorage.getItem(\"total_purchase_kaya\"))\n    this.total_purchase_kaya = total_purchase_kaya\n  }\n\n  set_kaya_invoice() {\n    let confirm = this.alertCtrl.create({\n      title: 'แจ้งเตือน',\n      message: 'คุณต้องการบันทึกข้อมูลการซื้อขยะหรือไม่ ?',\n      buttons: [\n        {\n          text: 'ยกเลิก',\n          handler: () => {\n            // console.log('Disagree clicked');\n          }\n        },\n        {\n          text: 'ตกลง',\n          handler: () => {\n            // console.log('Agree clicked');\n            // this.goto_kaya_purchase_completed()\n            this.set_kaya_profile()\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  goto_kaya_categories() {\n    this.navCtrl.pop()\n  }\n\n  goto_kaya_purchase_completed() {\n    this.presentToast()\n    this.navCtrl.push(\"buyer-kaya-purchase-completed\")\n  }\n\n  presentToast() {\n    let toast = this.toastCtrl.create({\n      message: 'บันทึกรายการสำเร็จ',\n      duration: 3000,\n      position: 'top'\n    });\n    toast.present();\n  }\n\n  set_kaya_profile() {\n    console.log(this.user.id)\n    let param = {\n      items: this.items,\n      seller_id: (typeof this.user != 'undefined' ? this.user.id : 0),\n      buyer_id: 1,\n      total_purchase_kaya: this.total_purchase_kaya,\n      kaya_type_id: 1,\n      acc_bank_id: this.user.account_bank_id || 0,\n    }\n    \n    this.BuyKayaService.set_kaya_profile(param).subscribe(res => {\n      this.goto_kaya_purchase_completed()\n    })\n  }\n\n  remove_item(id) {\n    this.items.splice(id, 1)\n    this.calculator_total(this.items)\n    localStorage.setItem('purchase_kaya_list', JSON.stringify(this.items))\n  }\n\n  calculator_total(items) {\n    let total = 0;\n    items.forEach((value) => {\n      total = total + value.total\n    });\n\n    this.total_purchase_kaya = total\n    localStorage.setItem('total_purchase_kaya', this.total_purchase_kaya)\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/buyer-kaya-purchase-list/buyer-kaya-purchase-list.ts"],"sourceRoot":""}