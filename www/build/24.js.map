{"version":3,"sources":["../../src/pages/buy-kaya-matching/buy-kaya-matching.module.ts","../../src/pages/buy-kaya-matching/buy-kaya-matching.ts"],"names":[],"mappings":"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","file":"24.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BuyKayaMatchingPage } from './buy-kaya-matching';\n\nimport { BuyersServiceProvider } from '../../providers/buyers-service/buyers-service';\n\n@NgModule({\n  declarations: [\n    BuyKayaMatchingPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BuyKayaMatchingPage)\n  ],\n  providers: [BuyersServiceProvider]\n})\nexport class BuyKayaMatchingPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/buy-kaya-matching/buy-kaya-matching.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\n\nimport { BuyersServiceProvider } from '../../providers/buyers-service/buyers-service';\nimport { ToastController } from 'ionic-angular';\nimport { BarcodeScanner, BarcodeScannerOptions } from '@ionic-native/barcode-scanner';\nimport { Storage } from '@ionic/storage';\n\n\n@IonicPage({\n  \"name\": \"buy-kaya-matching\",\n  \"segment\": \"buy-kaya-matching\"\n})\n\n@Component({\n  selector: 'page-buy-kaya-matching',\n  templateUrl: 'buy-kaya-matching.html',\n})\nexport class BuyKayaMatchingPage {\n\n  user: any={};\n  has_user: boolean = false\n\n  items: any={};\n  // address: string = 'เทศบาลตำบลพังโคน สกลนคร';\n  catName: string = \"\";\n  catId: number;\n  sellercode: string = \"\";\n  seller_matching_by: string = \"qrcode\";\n\n  public scannedText: string;\n  public buttonText: string;\n  public loading: boolean;\n  private eventId: number;\n  public eventTitle: string;\n  data = {}\n  option: BarcodeScannerOptions;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    private buyersService: BuyersServiceProvider,\n    private toastCtrl: ToastController,\n    private barcodeScanner: BarcodeScanner,\n    private storage: Storage) { }\n\n  ionViewDidLoad() {\n    this.eventId = this.navParams.get('eventId');\n    this.eventTitle = this.navParams.get('eventTitle');\n\n    this.buttonText = \"Scan\";\n    this.loading = false;\n\n    let catType = this.navParams.get('cat_type');\n    if (catType == \"localgovernment\") {\n      this.catName = \"เทศบาล\";\n      this.catId = 1;\n    }\n    if (catType == \"school\") {\n      this.catName = \"โรงเรียน\";\n      this.catId = 2;\n    }\n    if (catType == \"hospital\") {\n      this.catName = \"โรงพยาบาล\";\n      this.catId = 3;\n    }\n  }\n\n  searchSeller() {\n    if (this.sellercode == \"\") {\n      this.presentToast(\"ใส่รหัสผู้ขายขยะ\");\n    } else {\n\n      let sellercode = this.sellercode;\n      this.search_user(sellercode)\n    }\n\n  }\n\n\n  itemSelected(item: any) {\n    this.navCtrl.push('buyer-profile', {\n      user: item,\n    });\n  }\n\n  getItems(ev: any) {\n    let val = ev.target.value;\n\n    if (val && val.trim() != '') {\n      this.items = this.items.filter((item) => {\n        return (item.name.toLowerCase().indexOf(val.toLowerCase()) > -1);\n      })\n    } else {\n      // this.get_buyers()\n    }\n  }\n\n  Scanqrcode() {\n    this.option = {\n      preferFrontCamera: false,\n      prompt: \"สแกน QR CODE\"\n    }\n    this.barcodeScanner.scan(this.option).then((barcodeData) => {\n      this.data = barcodeData.text\n      this.search_user(this.data)\n    }, (err) => {\n      // An error occurred\n      console.log(err)\n    });\n\n  }\n\n\n  presentToast(txt) {\n    let toast = this.toastCtrl.create({\n      message: txt,\n      duration: 2000,\n      position: 'top'\n    });\n\n    toast.onDidDismiss(() => {\n      console.log('Dismissed toast');\n    });\n\n    toast.present();\n  }\n\n\n  search_user(sellercode) {\n    // this.buyersService.get_buyer_profile_by_category(sellercode, this.catId).subscribe(res => {\n    this.buyersService.get_buyer_profile(sellercode).subscribe(res => {\n\n    this.user = res\n    this.items = res\n      \n      this.storage.set('current_seller', this.user);\n      console.log(this.user)\n      if (JSON.stringify(this.user) == '{}') {\n        this.presentToast(\"ไม่พบข้อมูล\")\n        this.sellercode = \"\"\n        this.has_user = false\n      } else {\n        this.has_user = true\n      }\n    }, (error: any) => {\n      this.presentToast(\"กรุณาใส่รหัสผู้ขายขยะ\");\n    })\n  }\n\n  goto_kaya_categories(item: any) {\n    this.navCtrl.push('buyer-kaya-categories', {\n      user: this.user,\n    });\n  }\n  \n\n  clearPhoneNumber() {\n    this.sellercode = \"\"\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/buy-kaya-matching/buy-kaya-matching.ts"],"sourceRoot":""}